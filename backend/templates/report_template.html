<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Meeting Analysis Report</title>
  <style>
    /* ---------- Base styles ---------- */
    :root {
      --text: #2c3e50;
      --muted: #6b7280;
      --border: #e5e7eb;
      --accent: #111827;
    }
    * { box-sizing: border-box; }
    body {
      font-family: Arial, Helvetica, sans-serif;
      margin: 40px;
      line-height: 1.6;
      color: var(--text);
    }
    h1, h2, h3 {
      margin: 0 0 0.6em 0;
      color: var(--accent);
    }
    h1 { font-size: 1.8rem; }
    h2 { font-size: 1.25rem; border-bottom: 1px solid var(--border); padding-bottom: .4rem; }
    h3 { font-size: 1.05rem; }
    .section { margin-bottom: 34px; }
    .line { margin: 6px 0; }
    .timestamp { color: var(--muted); font-size: 0.9em; margin-right: 10px; }
    .sentiment { font-style: italic; color: #555; margin-left: 6px; }
    img { max-width: 100%; height: auto; border: 1px solid var(--border); border-radius: 6px; }
    .meta { font-size: 0.95rem; color: var(--muted); margin-top: -0.2rem; margin-bottom: 1rem; }
    .kv { margin: 6px 0; }
    .kv .label { font-weight: bold; margin-right: 6px; }
    .muted { color: var(--muted); }
    .divider { height: 1px; background: var(--border); margin: 6px 0 16px; border: 0; }
  </style>
</head>
<body>
  <h1>ðŸ“„ Meeting Analysis Report</h1>
  <div class="meta">
    <!-- These are optional fields; show only if provided -->
    {% if data.meeting_title %}<div><span class="label">Title:</span> {{ data.meeting_title }}</div>{% endif %}
    {% if data.generated_at %}<div><span class="label">Generated:</span> {{ data.generated_at }}</div>{% endif %}
  </div>

  <!-- 1) Summary -->
  <div class="section">
    <h2>1. Summary</h2>
    {% if data.summary %}
      {% for item in data.summary %}
        <p class="line"><span class="timestamp">{{ item.time }}</span>{{ item.text }}</p>
      {% endfor %}
    {% else %}
      <p class="muted">No summary available.</p>
    {% endif %}
  </div>

  <!-- 2) Transcript + Sentiment -->
  <div class="section">
    <h2>2. Transcript + Sentiment</h2>
    {% if data.transcript %}
      {% for item in data.transcript %}
        <p class="line">
          <span class="timestamp">{{ item.time }}</span>{{ item.text }}
          {% if item.sentiment %}
            <span class="sentiment">â†’ {{ item.sentiment }}</span>
          {% endif %}
        </p>
      {% endfor %}
    {% else %}
      <p class="muted">No transcript available.</p>
    {% endif %}
  </div>

  <!-- 3) Sentiment Overview (Chart) -->
  <div class="section">
    <h2>3. Sentiment Overview</h2>
    {% if data.sentiment_chart %}
      <img src="{{ data.sentiment_chart }}" alt="Sentiment Chart" width="420" />
    {% else %}
      <p class="muted">No sentiment chart provided.</p>
    {% endif %}
  </div>

  <!-- 4) Deepfake Detection -->
  <div class="section">
    <h2>4. Deepfake Detection</h2>

    {% if data.deepfake %}
      <p class="kv"><span class="label">Total Frames Checked:</span> {{ data.deepfake.total_frames }}</p>
      <p class="kv"><span class="label">Fake Frames Detected:</span> {{ data.deepfake.fake_frames }}</p>
      <p class="kv"><span class="label">Fake Percentage:</span> {{ data.deepfake.fake_percentage }}%</p>
      <hr class="divider" />
    {% endif %}

    {% if data.deepfake_chart %}
      <h3>Deepfake Detection Chart</h3>
      <img src="{{ data.deepfake_chart }}" alt="Deepfake Chart" width="420" />
    {% else %}
      <p class="muted">No deepfake chart provided.</p>
    {% endif %}
  </div>
</body>
</html>
